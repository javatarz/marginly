{"id":"book-review-platform-1id","title":"Build book and chapter rendering","description":"Home page showing accessible books, book page with table of contents, chapter page rendering HTML content. Include reading progress indicators and comment counts.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T09:44:49.160004+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T09:49:33.383163+05:30","closed_at":"2026-01-17T09:49:33.383163+05:30","close_reason":"Book list, table of contents, and chapter reader pages implemented with progress tracking"}
{"id":"book-review-platform-2qg","title":"Configure Vercel deployment and DNS","description":"Deploy to Vercel, configure environment variables. Set up review.karun.me DNS pointing to Vercel. Configure analytics.karun.me CNAME for Umami.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T09:44:52.940366+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T10:47:07.273277+05:30","closed_at":"2026-01-17T10:47:07.273277+05:30","close_reason":"Vercel deployment and DNS configured"}
{"id":"book-review-platform-33s","title":"Add chapters table entries and HTML content","description":"## Context\nThe book and book_access entries exist in Supabase, but chapters are missing.\n\n## Tasks\n1. Add chapter entries to the `chapters` table for chapters 1 and 2\n2. Set up HTML content delivery (either static files in `public/books/` or fetched from ie-book repo)\n3. Test that chapters render correctly after login\n\n## Chapter data needed\n- Chapter 1: 'production-doesnt-run-on-vibes', 'Production Doesn't Run on Vibes'\n- Chapter 2: 'the-careful-trap', 'The Careful Trap'","status":"closed","priority":1,"issue_type":"task","owner":"karun@japhet.in","created_at":"2026-01-17T10:46:17.029368+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T12:59:22.082954+05:30","closed_at":"2026-01-17T12:59:22.082954+05:30","close_reason":"Replaced by book-review-platform-v4g (book discovery) and book-review-platform-aze (chapter sync)"}
{"id":"book-review-platform-6pe","title":"Initialize Next.js project structure","description":"Set up Next.js 14 with TypeScript, Tailwind, App Router. Create folder structure for components, lib, and app routes.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T09:44:46.266081+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T09:49:29.957308+05:30","closed_at":"2026-01-17T09:49:29.957308+05:30","close_reason":"Initial Next.js 14 project with TypeScript, Tailwind, App Router scaffolded"}
{"id":"book-review-platform-9sa","title":"Add unit test pipeline with Vitest","description":"Set up Vitest for unit testing components and utility functions. Add CI integration.","status":"open","priority":2,"issue_type":"task","owner":"karun@japhet.in","created_at":"2026-01-17T11:05:31.077331+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T11:05:31.077331+05:30"}
{"id":"book-review-platform-a0w","title":"Implement reading progress tracking","description":"Track scroll position and time spent per chapter. Record reading sessions. Mark chapters as completed when scroll reaches 90%.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-17T09:44:50.102991+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T09:44:50.102991+05:30"}
{"id":"book-review-platform-a2x","title":"Fix login flow - RLS blocks email check for unauthenticated users","description":"## Problem\nThe login page queries `book_access` to verify the email before sending a magic link. But the RLS policy requires authentication:\n\n```sql\nusing (user_id = auth.uid() or user_email = auth.email())\n```\n\nSince `auth.email()` is null for unauthenticated users, the query returns nothing and users see 'No account found' even when they have access.\n\n## Fix\nCreate a `security definer` function that anonymous users can call:\n\n```sql\ncreate or replace function public.check_email_has_access(check_email text)\nreturns boolean\nlanguage sql\nsecurity definer\nas $$\n  select exists (\n    select 1 from public.book_access\n    where user_email = lower(check_email)\n  );\n$$;\n\ngrant execute on function public.check_email_has_access(text) to anon;\n```\n\nThen update `src/app/login/page.tsx` to use `supabase.rpc('check_email_has_access', { check_email: email })` instead of querying the table directly.\n\n## Files to change\n- `supabase/migrations/\u003ctimestamp\u003e_add_check_access_function.sql` (new)\n- `src/app/login/page.tsx`","status":"closed","priority":0,"issue_type":"bug","owner":"karun@japhet.in","created_at":"2026-01-17T10:46:02.694992+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T11:05:48.640159+05:30","closed_at":"2026-01-17T11:05:48.640159+05:30","close_reason":"Added security definer function and updated login page to use RPC"}
{"id":"book-review-platform-aze","title":"Sync manifest.json to chapters table on deploy","description":"## Context\nWhen book content is pushed to `public/books/{slug}/manifest.json`, sync chapter metadata to Supabase.\n\n## Requirements\n1. Trigger on changes to `public/books/**/manifest.json`\n2. Read manifest.json for each book\n3. Upsert to `chapters` table: book_id, slug, number, title, status\n4. Depends on book existing (run after book discovery)\n\n## Implementation\nGitHub Action in book-review-platform:\n```yaml\non:\n  push:\n    paths:\n      - 'public/books/**/manifest.json'\n```\n\nUse Supabase REST API with service_role key (secrets stay in this repo).","status":"in_progress","priority":1,"issue_type":"task","owner":"karun@japhet.in","created_at":"2026-01-17T12:59:15.775419+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T13:00:59.233735+05:30"}
{"id":"book-review-platform-ftp","title":"Build admin dashboard","description":"Dashboard for author to see all readers, their progress, and comments. Invite new readers. View comments with filters by chapter/reader. Basic analytics.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-17T09:44:51.993503+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T09:44:51.993503+05:30"}
{"id":"book-review-platform-myi","title":"Implement magic link auth flow","description":"Implement invite-only auth: login page checks book_access before sending magic link, auth callback, session middleware, signout. No self-registration allowed.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T09:44:48.200971+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T09:49:32.280951+05:30","closed_at":"2026-01-17T09:49:32.280951+05:30","close_reason":"Magic link auth with invite-only check, middleware, and session handling implemented"}
{"id":"book-review-platform-qij","title":"Create Supabase schema and RLS policies","description":"Create database tables: books, chapters, book_access, comments, reading_progress, reading_sessions. Set up Row Level Security policies for invite-only access.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-17T09:44:47.221301+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T09:49:31.16657+05:30","closed_at":"2026-01-17T09:49:31.16657+05:30","close_reason":"Schema created in supabase/schema.sql with all tables and RLS policies"}
{"id":"book-review-platform-rut","title":"Build inline commenting system","description":"Text selection to create comments anchored to specific paragraphs. Comment sidebar showing all comments for a chapter. Reply threads and resolve functionality.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-17T09:44:51.041615+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T09:44:51.041615+05:30"}
{"id":"book-review-platform-srf","title":"Add E2E test pipeline with Playwright","description":"Add E2E tests for critical paths: login flow, book access, chapter reading. Set up Playwright and CI integration.","status":"open","priority":2,"issue_type":"task","owner":"karun@japhet.in","created_at":"2026-01-17T11:05:30.577372+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T11:05:30.577372+05:30"}
{"id":"book-review-platform-v4g","title":"Auto-discover books from public/books/ on deploy","description":"## Context\nBooks shouldn't need to be created manually in Supabase. The platform should discover them from the filesystem.\n\n## Requirements\n1. On deploy, scan `public/books/*/` directories\n2. Each directory with a `manifest.json` is a book\n3. Upsert to `books` table: slug (from directory name), title/description (from manifest or defaults)\n4. Run before chapter sync\n\n## Implementation options\n- GitHub Action triggered on `public/books/**/manifest.json` changes\n- Vercel build script\n- Script in package.json postbuild\n\n## Manifest additions needed\nAdd to manifest.json in ie-book:\n```json\n{\n  \"book\": {\n    \"title\": \"intelligent Engineering\",\n    \"description\": \"...\",\n    \"version\": \"0.02\"\n  },\n  \"chapters\": [...]\n}\n```","status":"in_progress","priority":1,"issue_type":"task","owner":"karun@japhet.in","created_at":"2026-01-17T12:59:07.03139+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T13:00:59.159622+05:30"}
{"id":"book-review-platform-vyk","title":"Consolidate CI/CD into single pipeline","description":"Merge migration and deploy into one coordinated pipeline. Add --include-all flag. Vercel should only deploy after migrations succeed.","status":"closed","priority":1,"issue_type":"task","owner":"karun@japhet.in","created_at":"2026-01-17T11:16:14.538868+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T12:10:58.636324+05:30","closed_at":"2026-01-17T12:10:58.636324+05:30","close_reason":"Unified CI pipeline with lint, build, migrate stages"}
{"id":"book-review-platform-wpi","title":"Build admin dashboard","description":"## Features needed\n- View all readers and their access levels\n- See reading progress per reader per chapter\n- View and manage comments\n- Invite new readers (add to book_access)\n- Basic analytics (who read what, when)\n\n## Route\n`/admin` or `/[book]/admin`","status":"closed","priority":2,"issue_type":"task","owner":"karun@japhet.in","created_at":"2026-01-17T10:46:17.570792+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T10:47:07.350058+05:30","closed_at":"2026-01-17T10:47:07.350058+05:30","close_reason":"Duplicate of book-review-platform-ftp"}
{"id":"book-review-platform-wuc","title":"Build book review platform MVP","description":"Build the core book review platform with auth, chapter rendering, inline comments, and reading progress tracking. Tech stack: Next.js 14, Supabase, Vercel.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-17T09:44:28.876099+05:30","created_by":"Karun Japhet","updated_at":"2026-01-17T09:44:28.876099+05:30"}
